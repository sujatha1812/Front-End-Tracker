import*as e from"react";import{Tooltip as n}from"primereact/tooltip";import{ObjectUtils as t,classNames as l}from"primereact/utils";function r(){return r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},r.apply(this,arguments)}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function o(e){if(Array.isArray(e))return a(e)}function i(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function u(e,n){if(e){if("string"==typeof e)return a(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return o(e)||i(e)||u(e)||c()}function s(e){if(Array.isArray(e))return e}function f(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,r,a=[],o=!0,i=!1;try{for(t=t.call(e);!(o=(l=t.next()).done)&&(a.push(l.value),!n||a.length!==n);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==t.return||t.return()}finally{if(i)throw r}}return a}}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d=e.memo(e.forwardRef((function(a,o){var i,c,v=e.useState(!1),h=(c=2,s(i=v)||f(i,c)||u(i,c)||m()),y=h[0],g=h[1],b=e.useRef(null),w=e.useRef(null),E=e.useRef(a.inputRef),O=function(e,n){if(!a.disabled||!a.readOnly){var t=p(a.value),l=t.splice(n,1);I(l,n)&&(a.onRemove&&a.onRemove({originalEvent:e,value:l}),a.onChange&&a.onChange({originalEvent:e,value:t,stopPropagation:function(){},preventDefault:function(){},target:{name:a.name,id:a.id,value:t}}))}},x=function(e,n,t){if(n&&n.trim().length){var l=a.value?p(a.value):[];if(a.allowDuplicate||-1===l.indexOf(n)){var r=!0;a.onAdd&&(r=a.onAdd({originalEvent:e,value:n})),!1!==r&&l.push(n)}R(e,l,t)}},A=function(){E.current.focus()},D=function(e){var n=e.target.value,t=a.value||[];switch(e.which){case 8:0===E.current.value.length&&t.length>0&&O(e,t.length-1);break;case 13:n&&n.trim().length&&(!a.max||a.max>t.length)&&x(e,n,!0);break;default:S()?e.preventDefault():","===a.separator&&188===e.which&&x(e,n,!0)}},R=function(e,n,t){a.onChange&&a.onChange({originalEvent:e,value:n,stopPropagation:function(){},preventDefault:function(){},target:{name:a.name,id:a.id,value:n}}),E.current.value="",t&&e.preventDefault()},C=function(e){if(a.separator){var n=(e.clipboardData||window.clipboardData).getData("Text");if(n){var t=a.value||[],l=n.split(a.separator);l=l.filter((function(e){return(a.allowDuplicate||-1===t.indexOf(e))&&e.trim().length})),t=[].concat(p(t),p(l)),R(e,t,!0)}}},N=function(e){g(!0),a.onFocus&&a.onFocus(e)},k=function(e){g(!1),a.onBlur&&a.onBlur(e)},S=function(){return a.max&&a.value&&a.max===a.value.length},P=e.useMemo((function(){return a.value&&a.value.length||E.current&&E.current.value&&E.current.value.length}),[a.value]),I=function(e,n){return t.getPropValue(a.removable,{value:e,index:n,props:a})};e.useEffect((function(){t.combinedRefs(E,a.inputRef)}),[E,a.inputRef]);var T=function(n,t){return a.disabled||a.readOnly||!I(n,t)?null:e.createElement("span",{className:"p-chips-token-icon pi pi-times-circle",onClick:function(e){return O(e,t)}})},j=function(n,t){var l=a.itemTemplate?a.itemTemplate(n):n,r=e.createElement("span",{className:"p-chips-token-label"},l),o=T(n,t);return e.createElement("li",{key:t,className:"p-chips-token p-highlight"},r,o)},B=t.isNotEmpty(a.tooltip),F=t.findDiffKeys(a,d.defaultProps),K=l("p-chips p-component p-inputwrapper",{"p-inputwrapper-filled":P,"p-inputwrapper-focus":y},a.className),L=function(){var n=l("p-inputtext p-chips-multiple-container",{"p-disabled":a.disabled,"p-focus":y}),t=a.value?a.value.map(j):null,r=e.createElement("li",{className:"p-chips-input-token"},e.createElement("input",{ref:E,id:a.inputId,placeholder:a.placeholder,type:"text",name:a.name,disabled:a.disabled||S(),onKeyDown:D,onPaste:C,onFocus:N,onBlur:k,"aria-labelledby":a.ariaLabelledBy,readOnly:a.readOnly}));return e.createElement("ul",{ref:w,className:n,onClick:A},t,r)}();return e.createElement(e.Fragment,null,e.createElement("div",r({ref:b,id:a.id,className:K,style:a.style},F),L),B&&e.createElement(n,r({target:E,content:a.tooltip},a.tooltipOptions)))})));d.displayName="Chips",d.defaultProps={__TYPE:"Chips",id:null,inputRef:null,inputId:null,name:null,placeholder:null,value:null,max:null,disabled:null,readOnly:!1,removable:!0,style:null,className:null,tooltip:null,tooltipOptions:null,ariaLabelledBy:null,separator:null,allowDuplicate:!0,itemTemplate:null,onAdd:null,onRemove:null,onChange:null,onFocus:null,onBlur:null};export{d as Chips};
