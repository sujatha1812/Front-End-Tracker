"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("react"),n=require("primereact/hooks"),t=require("primereact/utils");function l(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var t=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,t.get?t:{enumerable:!0,get:function(){return e[n]}})}})),r.default=e,Object.freeze(r)}var a=l(r);function c(){return c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},c.apply(this,arguments)}var o=a.forwardRef((function(r,l){var u=a.useRef(null),s=a.useRef(null),i=a.useRef(null),d=a.useRef(null),p=a.useRef(!1),m=a.useRef(!1),f=a.useRef(null),h=a.useRef(null),v=a.useRef(null),g=a.useRef(null),b=a.useRef(null),y=a.useRef(!1),H=function(){var e=s.current.scrollWidth,r=-1*(u.current.clientHeight-i.current.clientHeight);v.current=s.current.clientWidth/e;var n=s.current.scrollHeight,l=-1*(u.current.clientWidth-d.current.clientWidth);g.current=s.current.clientHeight/n,b.current=window.requestAnimationFrame((function(){v.current>=1?t.DomHandler.addClass(i.current,"p-scrollpanel-hidden"):(t.DomHandler.removeClass(i.current,"p-scrollpanel-hidden"),i.current.style.cssText="width:"+Math.max(100*v.current,10)+"%; left:"+s.current.scrollLeft/e*100+"%;bottom:"+r+"px;"),g.current>=1?t.DomHandler.addClass(d.current,"p-scrollpanel-hidden"):(t.DomHandler.removeClass(d.current,"p-scrollpanel-hidden"),d.current.style.cssText="height:"+Math.max(100*g.current,10)+"%; top: calc("+s.current.scrollTop/n*100+"% - "+i.current.clientHeight+"px);right:"+l+"px;")}))},w=function(e){p?D(e):(m||D(e),E(e))},D=function(e){var r=e.pageX-f.current;f.current=e.pageX,b.current=window.requestAnimationFrame((function(){s.current.scrollLeft+=r/v.current}))},E=function(r){var n=r.pageY-h.current;h.current=e.pageY,b.current=window.requestAnimationFrame((function(){s.current.scrollTop+=n/g.current}))},x=function e(r){t.DomHandler.removeClass(d.current,"p-scrollpanel-grabbed"),t.DomHandler.removeClass(i.current,"p-scrollpanel-grabbed"),t.DomHandler.removeClass(document.body,"p-scrollpanel-grabbed"),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",e),p.current=!1,m.current=!1},C=function(){H()};n.useMountEffect((function(){var e,r,n;H(),window.addEventListener("resize",H),e=getComputedStyle(u.current),r=getComputedStyle(i.current),n=t.DomHandler.getHeight(u.current)-parseInt(r.height,10),"none"!==e["max-height"]&&0===n&&(u.current.style.height=s.current.offsetHeight+parseInt(r.height,10)>parseInt(e["max-height"],10)?e["max-height"]:s.current.offsetHeight+parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)+parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth)+"px"),y.current=!0})),n.useUnmountEffect((function(){y.current&&window.removeEventListener("resize",H),b.current&&window.cancelAnimationFrame(b.current)})),a.useImperativeHandle(l,(function(){return{refresh:C}}));var R=t.ObjectUtils.findDiffKeys(r,o.defaultProps),O=t.classNames("p-scrollpanel p-component",r.className);return a.createElement("div",c({ref:u,id:r.id,className:O,style:r.style},R),a.createElement("div",{className:"p-scrollpanel-wrapper"},a.createElement("div",{ref:s,className:"p-scrollpanel-content",onScroll:H,onMouseEnter:H},r.children)),a.createElement("div",{ref:i,className:"p-scrollpanel-bar p-scrollpanel-bar-x",onMouseDown:function(e){p.current=!0,f.current=e.pageX,t.DomHandler.addClass(i.current,"p-scrollpanel-grabbed"),t.DomHandler.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",w),document.addEventListener("mouseup",x),e.preventDefault()}}),a.createElement("div",{ref:d,className:"p-scrollpanel-bar p-scrollpanel-bar-y",onMouseDown:function(e){m.current=!0,h.current=e.pageY,t.DomHandler.addClass(d.current,"p-scrollpanel-grabbed"),t.DomHandler.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",w),document.addEventListener("mouseup",x),e.preventDefault()}}))}));o.displayName="ScrollPanel",o.defaultProps={__TYPE:"ScrollPanel",id:null,style:null,className:null},exports.ScrollPanel=o;
