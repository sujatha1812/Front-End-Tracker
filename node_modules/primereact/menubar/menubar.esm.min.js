import*as e from"react";import n from"primereact/api";import{useEventListener as t,useMountEffect as r,useUpdateEffect as a,useUnmountEffect as l}from"primereact/hooks";import{classNames as o,IconUtils as u,ObjectUtils as i,DomHandler as c,ZIndexUtils as s}from"primereact/utils";import{Ripple as m}from"primereact/ripple";function p(){return p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},p.apply(this,arguments)}function f(e){if(Array.isArray(e))return e}function d(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return l}}function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function v(e,n){if(e){if("string"==typeof e)return b(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,n):void 0}}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,n){return f(e)||d(e,n)||v(e,n)||y()}var g=e.memo(e.forwardRef((function(n,l){var s=h(e.useState(null),2),p=s[0],f=s[1],d=h(t({type:"click",listener:function(e){l&&l.current&&!l.current.contains(e.target)&&f(null)}}),1)[0],b=function(e,t){t.disabled||n.mobileActive?e.preventDefault():n.root?(p||n.popup)&&f(t):f(t)},v=function(e,n){n.disabled?e.preventDefault():(n.url||e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items?f(p&&n===p?null:n):A())},y=function(e,t){var r=e.currentTarget.parentElement;switch(e.which){case 40:n.root?t.items&&N(t,r):w(r),e.preventDefault();break;case 38:!n.root&&k(r),e.preventDefault();break;case 39:if(n.root){var a=S(r);a&&a.children[0].focus()}else t.items&&N(t,r);e.preventDefault();break;case 37:n.root&&k(r),e.preventDefault()}n.onKeyDown&&n.onKeyDown(e,r)},E=function(e,t){n.root?38===e.which&&null==t.previousElementSibling&&C(t):37===e.which&&C(t)},N=function(e,n){f(e),setTimeout((function(){n.children[1].children[0].children[0].focus()}),50)},C=function(e){f(null),e.parentElement.previousElementSibling.focus()},w=function(e){var n=S(e);n&&n.children[0].focus()},k=function(e){var n=D(e);n&&n.children[0].focus()},S=function e(n){var t=n.nextElementSibling;return t?c.hasClass(t,"p-disabled")||!c.hasClass(t,"p-menuitem")?e(t):t:null},D=function e(n){var t=n.previousElementSibling;return t?c.hasClass(t,"p-disabled")||!c.hasClass(t,"p-menuitem")?e(t):t:null},A=function(){f(null),n.onLeafClick&&n.onLeafClick()};r((function(){d()})),a((function(){!n.parentActive&&f(null)}),[n.parentActive]);var I=function(n){return e.createElement("li",{key:"separator_"+n,className:"p-menu-separator",role:"separator"})},x=function(t){return t.items?e.createElement(g,{menuProps:n.menuProps,model:t.items,mobileActive:n.mobileActive,onLeafClick:A,onKeyDown:E,parentActive:t===p}):null},P=function(t,r){var a=t.label+"_"+r,l=o("p-menuitem",{"p-menuitem-active":p===t},t.className),c=o("p-menuitem-link",{"p-disabled":t.disabled}),s=o("p-menuitem-icon",t.icon),f=o("p-submenu-icon pi",{"pi-angle-down":n.root,"pi-angle-right":!n.root}),d=u.getJSXIcon(t.icon,{className:"p-menuitem-icon"},{props:n.menuProps}),h=t.label&&e.createElement("span",{className:"p-menuitem-text"},t.label),g=t.items&&e.createElement("span",{className:f}),E=x(t),N=e.createElement("a",{href:t.url||"#",role:"menuitem",className:c,target:t.target,"aria-haspopup":null!=t.items,onClick:function(e){return v(e,t)},onKeyDown:function(e){return y(e,t)}},d,h,g,e.createElement(m,null));t.template&&(N=i.getJSXElement(t.template,t,{onClick:function(e){return v(e,t)},onKeyDown:function(e){return y(e,t)},className:c,labelClassName:"p-menuitem-text",iconClassName:s,submenuIconClassName:f,element:N,props:n}));return e.createElement("li",{key:a,role:"none",className:l,style:t.style,onMouseEnter:function(e){return b(e,t)}},N,E)},K=function(e,n){return e.separator?I(n):P(e,n)},j=n.root?"menubar":"menu",M=o({"p-submenu-list":!n.root,"p-menubar-root-list":n.root}),O=n.model?n.model.map(K):null;return e.createElement("ul",{ref:l,className:M,role:j},O)})));g.displayName="MenubarSub";var E=e.memo(e.forwardRef((function(r,u){var c=h(e.useState(!1),2),m=c[0],f=c[1],d=e.useRef(null),b=e.useRef(null),v=h(t({type:"click",listener:function(e){m&&w(e)&&f(!1)}}),2),y=v[0],N=v[1],C=function(e){e.preventDefault(),f((function(e){return!e}))},w=function(e){return d.current!==e.target&&!d.current.contains(e.target)&&b.current!==e.target&&!b.current.contains(e.target)};a((function(){m?(s.set("menu",d.current,n.autoZIndex,n.zIndex.menu),y()):(N(),s.clear(d.current))}),[m]),l((function(){s.clear(d.current)})),e.useImperativeHandle(u,(function(){return{toggle:C,useCustomContent:useCustomContent}}));var k=i.findDiffKeys(r,E.defaultProps),S=o("p-menubar p-component",{"p-menubar-mobile-active":m},r.className),D=function(){if(r.start){var n=i.getJSXElement(r.start,r);return e.createElement("div",{className:"p-menubar-start"},n)}return null}(),A=function(){if(r.end){var n=i.getJSXElement(r.end,r);return e.createElement("div",{className:"p-menubar-end"},n)}return null}(),I=e.createElement("a",{ref:b,href:"#",role:"button",tabIndex:0,className:"p-menubar-button",onClick:C},e.createElement("i",{className:"pi pi-bars"})),x=e.createElement(g,{ref:d,menuProps:r,model:r.model,root:!0,mobileActive:m,onLeafClick:function(){f(!1)}});return e.createElement("div",p({id:r.id,className:S,style:r.style},k),D,I,x,A)})));E.displayName="Menubar",E.defaultProps={__TYPE:"Menubar",id:null,model:null,style:null,className:null,start:null,end:null};export{E as Menubar};
