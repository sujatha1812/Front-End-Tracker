import*as e from"react";import t from"primereact/api";import{usePrevious as n,useResizeListener as r,useMountEffect as a,useUpdateEffect as l,useUnmountEffect as u}from"primereact/hooks";import{Ripple as o}from"primereact/ripple";import{classNames as c,UniqueComponentId as i,ObjectUtils as s,DomHandler as m}from"primereact/utils";function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){if(Array.isArray(e))return f(e)}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e){if(Array.isArray(e))return e}function b(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],u=!0,o=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);u=!0);}catch(e){o=!0,a=e}finally{try{u||null==n.return||n.return()}finally{if(o)throw a}}return l}}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){return y(e)||b(e,t)||h(e,t)||N()}var C=e.memo((function(t){var n=t.template(t.item),r=c(t.className,"p-carousel-item",{"p-carousel-item-active":t.active,"p-carousel-item-start":t.start,"p-carousel-item-end":t.end});return e.createElement("div",{className:r},n)})),S=e.memo(e.forwardRef((function(f,y){var b=E(e.useState(f.numVisible),2),N=b[0],I=b[1],k=E(e.useState(f.numScroll),2),w=k[0],P=k[1],T=E(e.useState(f.page*f.numScroll*-1),2),R=T[0],x=T[1],A=E(e.useState(f.page),2),V=A[0],O=A[1],M=e.useRef(null),j=e.useRef(null),D=e.useRef(0),_=e.useRef(!!f.autoplayInterval),H=e.useRef(""),Y=e.useRef(20),z=e.useRef(null),X=e.useRef(null),F=e.useRef(null),K=e.useRef(!1),L=e.useRef(null),U=n(w),W=n(N),$=n(f.value),q=n(f.page),B="vertical"===f.orientation,G=f.circular||!!f.autoplayInterval,J=G&&f.value.length>=N,Q=f.autoplayInterval&&_.current,Z=f.onPageChange?f.page:V,ee=f.value?Math.ceil((f.value.length-N)/w)+1:0,te=E(r({listener:function(){re()},when:f.responsiveOptions}),1)[0],ne=function(e,t){var n=R;null!=t?(n=w*t*-1,J&&(n-=N),K.current=!1):(n+=w*e,K.current&&(n+=D.current-w*e,K.current=!1),t=Math.abs(Math.floor((J?n+N:n)/w)));J&&V===ee-1&&-1===e?(n=-1*(f.value.length+N),t=0):J&&0===V&&1===e?(n=0,t=ee-1):t===ee-1&&D.current>0&&(n+=-1*D.current-w*e,K.current=!0),j.current&&(m.removeClass(j.current,"p-items-hidden"),ve(n),j.current.style.transition="transform 500ms ease 0s"),f.onPageChange?(x(n),f.onPageChange({page:t})):(O(t),x(n))},re=function(){if(j.current&&L.current){for(var e=window.innerWidth,t={numVisible:f.numVisible,numScroll:f.numScroll},n=0;n<L.current.length;n++){var r=L.current[n];parseInt(r.breakpoint,10)>=e&&(t=r)}if(w!==t.numScroll){var a=Math.floor(Z*w/t.numScroll),l=t.numScroll*a*-1;J&&(l-=t.numVisible),x(l),P(t.numScroll),f.onPageChange?f.onPageChange({page:a}):O(a)}N!==t.numVisible&&I(t.numVisible)}},ae=function(e,t){(G||0!==Z)&&ne(1,t),_.current=!1,e.cancelable&&e.preventDefault()},le=function(e,t){(G||Z<ee-1)&&ne(-1,t),_.current=!1,e.cancelable&&e.preventDefault()},ue=function(e,t){t>Z?le(e,t):t<Z&&ae(e,t)},oe=function(e){j.current&&"transform"===e.propertyName&&(m.addClass(j.current,"p-items-hidden"),j.current.style.transition="",0!==V&&V!==ee-1||!J||ve(R))},ce=function(e){var t=e.changedTouches[0];z.current={x:t.pageX,y:t.pageY}},ie=function(e){e.cancelable&&e.preventDefault()},se=function(e){var t=e.changedTouches[0];me(e,B?t.pageY-z.current.y:t.pageX-z.current.x)},me=function(e,t){Math.abs(t)>Y&&(t<0?le(e):ae(e))},pe=function(){X.current&&clearInterval(X.current)},fe=function(){F.current||(F.current=m.createInlineStyle(t.nonce));var e,n="\n            .p-carousel[".concat(H.current,"] .p-carousel-item {\n                flex: 1 0 ").concat(100/N,"%\n            }\n        ");if(f.responsiveOptions){L.current=v(e=f.responsiveOptions)||d(e)||h(e)||g(),L.current.sort((function(e,n){return s.sort(e.breakpoint,n.breakpoint,-1,t.locale)}));for(var r=0;r<L.current.length;r++){var a=L.current[r];n+="\n                    @media screen and (max-width: ".concat(a.breakpoint,") {\n                        .p-carousel[").concat(H.current,"] .p-carousel-item {\n                            flex: 1 0 ").concat(100/a.numVisible,"%\n                        }\n                    }\n                ")}}F.current.innerHTML=n},ve=function(e){j.current&&(j.current.style.transform=B?"translate3d(0, ".concat(e*(100/N),"%, 0)"):"translate3d(".concat(e*(100/N),"%, 0, 0)"))};a((function(){M.current&&(H.current=i(),M.current.setAttribute(H.current,"")),fe(),re(),ve(R),te()})),l((function(){var e=!1,t=R;if(f.autoplayInterval&&pe(),U!==w||W!==N||f.value&&$&&$.length!==f.value.length){D.current=(f.value.length-N)%w;var n=Z;0!==ee&&n>=ee&&(n=ee-1,f.onPageChange?f.onPageChange({page:n}):O(n),e=!0),t=n*w*-1,J&&(t-=N),n===ee-1&&D.current>0?(t+=-1*D.current+w,K.current=!0):K.current=!1,t!==R&&(x(t),e=!0),ve(t)}J&&(0===V?t=-1*N:0===t&&(t=-1*f.value.length,D.current>0&&(K.current=!0)),t!==R&&(x(t),e=!0)),q!==f.page&&(f.page>q&&f.page<=ee-1?ne(-1,f.page):f.page<q&&ne(1,f.page)),!e&&Q&&(X.current=setInterval((function(){ne(-1,V===ee-1?0:V+1)}),f.autoplayInterval))})),u((function(){f.autoplayInterval&&pe()}));var de=function(){if(f.value&&f.value.length){var t=null,n=null;if(J){var r=null;t=(r=f.value.slice(-1*N)).map((function(t,n){return e.createElement(C,{key:n+"_scloned",className:"p-carousel-item-cloned",template:f.itemTemplate,item:t,active:-1*R===f.value.length+N,start:0===n,end:n===r.length-1})})),n=(r=f.value.slice(0,N)).map((function(t,n){return e.createElement(C,{key:n+"_fcloned",className:"p-carousel-item-cloned",template:f.itemTemplate,item:t,active:0===R,start:0===n,end:n===r.length-1})}))}var a=f.value.map((function(t,n){var r=J?-1*(R+N):-1*R,a=r+N-1;return e.createElement(C,{key:n,template:f.itemTemplate,item:t,active:r<=n&&a>=n,start:r===n,end:a===n})}));return e.createElement(e.Fragment,null,t,a,n)}},he=function(){var t=(!G||f.value&&f.value.length<N)&&0===Z,n=c("p-carousel-prev p-link",{"p-disabled":t}),r=c("p-carousel-prev-icon pi",{"pi-chevron-left":!B,"pi-chevron-up":B});return e.createElement("button",{type:"button",className:n,onClick:ae,disabled:t},e.createElement("span",{className:r}),e.createElement(o,null))},ge=function(){var t=(!G||f.value&&f.value.length<N)&&(Z===ee-1||0===ee),n=c("p-carousel-next p-link",{"p-disabled":t}),r=c("p-carousel-next-icon pi",{"pi-chevron-right":!B,"pi-chevron-down":B});return e.createElement("button",{type:"button",className:n,onClick:le,disabled:t},e.createElement("span",{className:r}),e.createElement(o,null))},ye=function(t){var n="carousel-indicator-"+t,r=c("p-carousel-indicator",{"p-highlight":Z===t});return e.createElement("li",{key:n,className:r},e.createElement("button",{type:"button",className:"p-link",onClick:function(e){return ue(e,t)}},e.createElement(o,null)))},be=s.findDiffKeys(f,S.defaultProps),Ne=c("p-carousel p-component",{"p-carousel-vertical":B,"p-carousel-horizontal":!B},f.className),Ee=c("p-carousel-content",f.contentClassName),Ce=function(){var t=de(),n=B?f.verticalViewPortHeight:"auto",r=he(),a=ge(),l=c("p-carousel-container",f.containerClassName);return e.createElement("div",{className:l},r,e.createElement("div",{className:"p-carousel-items-content",style:{height:n},onTouchStart:ce,onTouchMove:ie,onTouchEnd:se},e.createElement("div",{ref:j,className:"p-carousel-items-container",onTransitionEnd:oe},t)),a)}(),Se=function(){for(var t=c("p-carousel-indicators p-reset",f.indicatorsContentClassName),n=[],r=0;r<ee;r++)n.push(ye(r));return e.createElement("ul",{className:t},n)}(),Ie=f.header?e.createElement("div",{className:"p-carousel-header"},f.header):null,ke=f.footer?e.createElement("div",{className:"p-carousel-footer"},f.footer):null;return e.createElement("div",p({ref:M,id:f.id,className:Ne,style:f.style},be),Ie,e.createElement("div",{className:Ee},Ce,Se),ke)})));C.displayName="CarouselItem",S.displayName="Carousel",S.defaultProps={__TYPE:"Carousel",id:null,value:null,page:0,header:null,footer:null,style:null,className:null,itemTemplate:null,circular:!1,autoplayInterval:0,numVisible:1,numScroll:1,responsiveOptions:null,orientation:"horizontal",verticalViewPortHeight:"300px",contentClassName:null,containerClassName:null,indicatorsContentClassName:null,onPageChange:null};export{S as Carousel};
