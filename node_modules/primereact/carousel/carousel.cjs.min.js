"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/hooks"),r=require("primereact/ripple"),a=require("primereact/utils");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var c=u(e),o=l(t);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){if(Array.isArray(e))return s(e)}function p(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){if(Array.isArray(e))return e}function h(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],u=!0,c=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{u||null==n.return||n.return()}finally{if(c)throw a}}return l}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){return d(e)||h(e,t)||f(e,t)||g()}var b=c.memo((function(e){var t=e.template(e.item),n=a.classNames(e.className,"p-carousel-item",{"p-carousel-item-active":e.active,"p-carousel-item-start":e.start,"p-carousel-item-end":e.end});return c.createElement("div",{className:n},t)})),N=c.memo(c.forwardRef((function(e,t){var l=y(c.useState(e.numVisible),2),u=l[0],s=l[1],d=y(c.useState(e.numScroll),2),h=d[0],g=d[1],E=y(c.useState(e.page*e.numScroll*-1),2),C=E[0],S=E[1],P=y(c.useState(e.page),2),I=P[0],O=P[1],k=c.useRef(null),w=c.useRef(null),R=c.useRef(0),j=c.useRef(!!e.autoplayInterval),T=c.useRef(""),x=c.useRef(20),M=c.useRef(null),A=c.useRef(null),V=c.useRef(null),D=c.useRef(!1),_=c.useRef(null),q=n.usePrevious(h),H=n.usePrevious(u),U=n.usePrevious(e.value),z=n.usePrevious(e.page),Y="vertical"===e.orientation,L=e.circular||!!e.autoplayInterval,X=L&&e.value.length>=u,F=e.autoplayInterval&&j.current,K=e.onPageChange?e.page:I,W=e.value?Math.ceil((e.value.length-u)/h)+1:0,$=y(n.useResizeListener({listener:function(){G()},when:e.responsiveOptions}),1)[0],B=function(t,n){var r=C;null!=n?(r=h*n*-1,X&&(r-=u),D.current=!1):(r+=h*t,D.current&&(r+=R.current-h*t,D.current=!1),n=Math.abs(Math.floor((X?r+u:r)/h)));X&&I===W-1&&-1===t?(r=-1*(e.value.length+u),n=0):X&&0===I&&1===t?(r=0,n=W-1):n===W-1&&R.current>0&&(r+=-1*R.current-h*t,D.current=!0),w.current&&(a.DomHandler.removeClass(w.current,"p-items-hidden"),ce(r),w.current.style.transition="transform 500ms ease 0s"),e.onPageChange?(S(r),e.onPageChange({page:n})):(O(n),S(r))},G=function(){if(w.current&&_.current){for(var t=window.innerWidth,n={numVisible:e.numVisible,numScroll:e.numScroll},r=0;r<_.current.length;r++){var a=_.current[r];parseInt(a.breakpoint,10)>=t&&(n=a)}if(h!==n.numScroll){var l=Math.floor(K*h/n.numScroll),c=n.numScroll*l*-1;X&&(c-=n.numVisible),S(c),g(n.numScroll),e.onPageChange?e.onPageChange({page:l}):O(l)}u!==n.numVisible&&s(n.numVisible)}},J=function(e,t){(L||0!==K)&&B(1,t),j.current=!1,e.cancelable&&e.preventDefault()},Q=function(e,t){(L||K<W-1)&&B(-1,t),j.current=!1,e.cancelable&&e.preventDefault()},Z=function(e,t){t>K?Q(e,t):t<K&&J(e,t)},ee=function(e){w.current&&"transform"===e.propertyName&&(a.DomHandler.addClass(w.current,"p-items-hidden"),w.current.style.transition="",0!==I&&I!==W-1||!X||ce(C))},te=function(e){var t=e.changedTouches[0];M.current={x:t.pageX,y:t.pageY}},ne=function(e){e.cancelable&&e.preventDefault()},re=function(e){var t=e.changedTouches[0];ae(e,Y?t.pageY-M.current.y:t.pageX-M.current.x)},ae=function(e,t){Math.abs(t)>x&&(t<0?Q(e):J(e))},le=function(){A.current&&clearInterval(A.current)},ue=function(){V.current||(V.current=a.DomHandler.createInlineStyle(o.default.nonce));var t,n="\n            .p-carousel[".concat(T.current,"] .p-carousel-item {\n                flex: 1 0 ").concat(100/u,"%\n            }\n        ");if(e.responsiveOptions){_.current=m(t=e.responsiveOptions)||p(t)||f(t)||v(),_.current.sort((function(e,t){return a.ObjectUtils.sort(e.breakpoint,t.breakpoint,-1,o.default.locale)}));for(var r=0;r<_.current.length;r++){var l=_.current[r];n+="\n                    @media screen and (max-width: ".concat(l.breakpoint,") {\n                        .p-carousel[").concat(T.current,"] .p-carousel-item {\n                            flex: 1 0 ").concat(100/l.numVisible,"%\n                        }\n                    }\n                ")}}V.current.innerHTML=n},ce=function(e){w.current&&(w.current.style.transform=Y?"translate3d(0, ".concat(e*(100/u),"%, 0)"):"translate3d(".concat(e*(100/u),"%, 0, 0)"))};n.useMountEffect((function(){k.current&&(T.current=a.UniqueComponentId(),k.current.setAttribute(T.current,"")),ue(),G(),ce(C),$()})),n.useUpdateEffect((function(){var t=!1,n=C;if(e.autoplayInterval&&le(),q!==h||H!==u||e.value&&U&&U.length!==e.value.length){R.current=(e.value.length-u)%h;var r=K;0!==W&&r>=W&&(r=W-1,e.onPageChange?e.onPageChange({page:r}):O(r),t=!0),n=r*h*-1,X&&(n-=u),r===W-1&&R.current>0?(n+=-1*R.current+h,D.current=!0):D.current=!1,n!==C&&(S(n),t=!0),ce(n)}X&&(0===I?n=-1*u:0===n&&(n=-1*e.value.length,R.current>0&&(D.current=!0)),n!==C&&(S(n),t=!0)),z!==e.page&&(e.page>z&&e.page<=W-1?B(-1,e.page):e.page<z&&B(1,e.page)),!t&&F&&(A.current=setInterval((function(){B(-1,I===W-1?0:I+1)}),e.autoplayInterval))})),n.useUnmountEffect((function(){e.autoplayInterval&&le()}));var oe=function(){if(e.value&&e.value.length){var t=null,n=null;if(X){var r=null;t=(r=e.value.slice(-1*u)).map((function(t,n){return c.createElement(b,{key:n+"_scloned",className:"p-carousel-item-cloned",template:e.itemTemplate,item:t,active:-1*C===e.value.length+u,start:0===n,end:n===r.length-1})})),n=(r=e.value.slice(0,u)).map((function(t,n){return c.createElement(b,{key:n+"_fcloned",className:"p-carousel-item-cloned",template:e.itemTemplate,item:t,active:0===C,start:0===n,end:n===r.length-1})}))}var a=e.value.map((function(t,n){var r=X?-1*(C+u):-1*C,a=r+u-1;return c.createElement(b,{key:n,template:e.itemTemplate,item:t,active:r<=n&&a>=n,start:r===n,end:a===n})}));return c.createElement(c.Fragment,null,t,a,n)}},ie=function(){var t=(!L||e.value&&e.value.length<u)&&0===K,n=a.classNames("p-carousel-prev p-link",{"p-disabled":t}),l=a.classNames("p-carousel-prev-icon pi",{"pi-chevron-left":!Y,"pi-chevron-up":Y});return c.createElement("button",{type:"button",className:n,onClick:J,disabled:t},c.createElement("span",{className:l}),c.createElement(r.Ripple,null))},se=function(){var t=(!L||e.value&&e.value.length<u)&&(K===W-1||0===W),n=a.classNames("p-carousel-next p-link",{"p-disabled":t}),l=a.classNames("p-carousel-next-icon pi",{"pi-chevron-right":!Y,"pi-chevron-down":Y});return c.createElement("button",{type:"button",className:n,onClick:Q,disabled:t},c.createElement("span",{className:l}),c.createElement(r.Ripple,null))},me=function(e){var t="carousel-indicator-"+e,n=a.classNames("p-carousel-indicator",{"p-highlight":K===e});return c.createElement("li",{key:t,className:n},c.createElement("button",{type:"button",className:"p-link",onClick:function(t){return Z(t,e)}},c.createElement(r.Ripple,null)))},pe=a.ObjectUtils.findDiffKeys(e,N.defaultProps),fe=a.classNames("p-carousel p-component",{"p-carousel-vertical":Y,"p-carousel-horizontal":!Y},e.className),ve=a.classNames("p-carousel-content",e.contentClassName),de=function(){var t=oe(),n=Y?e.verticalViewPortHeight:"auto",r=ie(),l=se(),u=a.classNames("p-carousel-container",e.containerClassName);return c.createElement("div",{className:u},r,c.createElement("div",{className:"p-carousel-items-content",style:{height:n},onTouchStart:te,onTouchMove:ne,onTouchEnd:re},c.createElement("div",{ref:w,className:"p-carousel-items-container",onTransitionEnd:ee},t)),l)}(),he=function(){for(var t=a.classNames("p-carousel-indicators p-reset",e.indicatorsContentClassName),n=[],r=0;r<W;r++)n.push(me(r));return c.createElement("ul",{className:t},n)}(),ge=e.header?c.createElement("div",{className:"p-carousel-header"},e.header):null,ye=e.footer?c.createElement("div",{className:"p-carousel-footer"},e.footer):null;return c.createElement("div",i({ref:k,id:e.id,className:fe,style:e.style},pe),ge,c.createElement("div",{className:ve},de,he),ye)})));b.displayName="CarouselItem",N.displayName="Carousel",N.defaultProps={__TYPE:"Carousel",id:null,value:null,page:0,header:null,footer:null,style:null,className:null,itemTemplate:null,circular:!1,autoplayInterval:0,numVisible:1,numScroll:1,responsiveOptions:null,orientation:"horizontal",verticalViewPortHeight:"300px",contentClassName:null,containerClassName:null,indicatorsContentClassName:null,onPageChange:null},exports.Carousel=N;
