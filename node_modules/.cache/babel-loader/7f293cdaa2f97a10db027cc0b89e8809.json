{"ast":null,"code":"import axios from \"axios\";\nimport { USER_LOGIN_REQUEST, USER_LOGIN_FAIL, USER_LOGIN_SUCCESS, USER_LOGOUT, FETCH_USERS_REQUEST, FETCH_USERS_SUCCESS, FETCH_USERS_FAIL, FETCH_USERPROFILE_REQUEST, FETCH_USERPROFILE_SUCCESS, FETCH_USERPROFILE_FAIL } from \"./actionTypes\";\nexport const loginUser = _ref => {\n  let {\n    username,\n    password\n  } = _ref;\n  return async dispatch => {\n    try {\n      dispatch({\n        type: USER_LOGIN_REQUEST\n      });\n      const config = {\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      const {\n        data\n      } = await axios.post(\"/api-login\", {\n        username,\n        password\n      }, config);\n      dispatch({\n        type: USER_LOGIN_SUCCESS,\n        payload: data\n      });\n      sessionStorage.setItem(\"userAuthData\", JSON.stringify(data)); // sessionStorage.setItem(\"token\", JSON.stringify(data.token));\n    } catch (error) {\n      dispatch({\n        type: USER_LOGIN_FAIL,\n        payload: error.response.data.message\n      });\n    }\n  };\n};\nexport const fetchUsers = () => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: FETCH_USERS_REQUEST,\n        loading: true\n      });\n      const {\n        userInfo\n      } = getState().userLogin;\n      console.log(userInfo);\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `token ${userInfo.token.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.get(\"/all-students\", config);\n      dispatch({\n        type: FETCH_USERS_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      dispatch({\n        type: FETCH_USERS_FAIL,\n        error: error.response && error.response.data.message\n      });\n    }\n  };\n};\nexport const fetchUserprofile = () => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: FETCH_USERPROFILE_REQUEST,\n        loading: true\n      });\n      const {\n        userInfo\n      } = getState().userLogin;\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `token ${userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.get(\"/user-profile\", config);\n      dispatch({\n        type: FETCH_USERPROFILE_SUCCESS,\n        payload: data\n      });\n      sessionStorage.setItem(\"isstaff\", JSON.stringify(data.is_staff));\n    } catch (error) {\n      dispatch({\n        type: FETCH_USERPROFILE_FAIL,\n        error: error.response && error.response.data.message\n      });\n    }\n  };\n};\nexport const logoutUser = () => {\n  return async dispatch => {\n    sessionStorage.clear();\n\n    try {\n      dispatch({\n        type: USER_LOGOUT\n      });\n    } catch (error) {}\n  };\n};","map":{"version":3,"sources":["/home/asplap1462/Desktop/Documents/Tasks/task1/project-31/Frontend/src/redux/actions/users/useractions.js"],"names":["axios","USER_LOGIN_REQUEST","USER_LOGIN_FAIL","USER_LOGIN_SUCCESS","USER_LOGOUT","FETCH_USERS_REQUEST","FETCH_USERS_SUCCESS","FETCH_USERS_FAIL","FETCH_USERPROFILE_REQUEST","FETCH_USERPROFILE_SUCCESS","FETCH_USERPROFILE_FAIL","loginUser","username","password","dispatch","type","config","credentials","headers","data","post","payload","sessionStorage","setItem","JSON","stringify","error","response","message","fetchUsers","getState","loading","userInfo","userLogin","console","log","authorization","token","get","fetchUserprofile","is_staff","logoutUser","clear"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {\n\n    USER_LOGIN_REQUEST,\n    USER_LOGIN_FAIL,\n    USER_LOGIN_SUCCESS,\n    USER_LOGOUT,\n    FETCH_USERS_REQUEST,\n    FETCH_USERS_SUCCESS,\n    FETCH_USERS_FAIL,\n    FETCH_USERPROFILE_REQUEST,\n    FETCH_USERPROFILE_SUCCESS,\n    FETCH_USERPROFILE_FAIL,\n} from \"./actionTypes\";\n\n\nexport const loginUser = ({ username, password }) => {\n    return async (dispatch) => {\n        try {\n            dispatch({\n                type: USER_LOGIN_REQUEST,\n            });\n\n            const config = {\n                credentials: \"include\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            };\n            const { data } = await axios.post(\n                \"/api-login\",\n                { username, password },\n                config\n            );\n            dispatch({\n                type: USER_LOGIN_SUCCESS,\n                payload: data,\n            });\n            sessionStorage.setItem(\"userAuthData\", JSON.stringify(data));\n            // sessionStorage.setItem(\"token\", JSON.stringify(data.token));\n        } catch (error) {\n            dispatch({\n                type: USER_LOGIN_FAIL,\n                payload: error.response.data.message,\n            });\n        }\n    };\n};\n\nexport const fetchUsers = () => {\n    return async (dispatch, getState) => {\n        try {\n            dispatch({\n                type: FETCH_USERS_REQUEST,\n                loading: true,\n            });\n            const { userInfo } = getState().userLogin;\n            console.log(userInfo)\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    authorization: `token ${userInfo.token.token}`,\n                },\n            };\n            const { data } = await axios.get(\"/all-students\", config);\n            dispatch({\n                type: FETCH_USERS_SUCCESS,\n                payload: data,\n            });\n        } catch (error) {\n            dispatch({\n                type: FETCH_USERS_FAIL,\n                error: error.response && error.response.data.message,\n            });\n        }\n    };\n};\n\nexport const fetchUserprofile = () => {\n    return async (dispatch, getState) => {\n        try {\n            dispatch({\n                type: FETCH_USERPROFILE_REQUEST,\n                loading: true,\n            });\n            const { userInfo } = getState().userLogin;\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    authorization: `token ${userInfo.token}`,\n                },\n            };\n\n            const { data } = await axios.get(\"/user-profile\", config);\n            dispatch({\n                type: FETCH_USERPROFILE_SUCCESS,\n                payload: data,\n            });\n            sessionStorage.setItem(\"isstaff\", JSON.stringify(data.is_staff));\n        } catch (error) {\n            dispatch({\n                type: FETCH_USERPROFILE_FAIL,\n                error: error.response && error.response.data.message,\n            });\n        }\n    };\n}\n\nexport const logoutUser = () => {\n    return async (dispatch) => {\n        sessionStorage.clear();\n        try {\n            dispatch({\n                type: USER_LOGOUT,\n            });\n        } catch (error) { }\n    };\n};\n"]},"metadata":{},"sourceType":"module"}