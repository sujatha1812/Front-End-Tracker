{"ast":null,"code":"import _asyncToGenerator from\"/home/asplap1462/Downloads/project-31/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/asplap1462/Downloads/project-31/Frontend/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import{USER_LOGIN_REQUEST,USER_LOGIN_FAIL,USER_LOGIN_SUCCESS,USER_LOGOUT,FETCH_USERS_REQUEST,FETCH_USERS_SUCCESS,FETCH_USERS_FAIL,FETCH_USERPROFILE_REQUEST,FETCH_USERPROFILE_SUCCESS,FETCH_USERPROFILE_FAIL}from\"./actionTypes\";export var loginUser=function loginUser(_ref){var username=_ref.username,password=_ref.password;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:USER_LOGIN_REQUEST});config={credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}};_context.next=5;return axios.post(\"/api-login\",{username:username,password:password},config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch({type:USER_LOGIN_SUCCESS,payload:data});sessionStorage.setItem(\"userAuthData\",JSON.stringify(data));sessionStorage.setItem(\"id\",JSON.stringify(data.profile.id));sessionStorage.setItem(\"token\",JSON.stringify(data.token));sessionStorage.setItem(\"isstaff\",JSON.stringify(data.profile.is_staff));sessionStorage.setItem(\"username\",JSON.stringify(data.profile.username));_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);dispatch({type:USER_LOGIN_FAIL,payload:_context.t0.response.data.message});case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};export var fetchUsers=function fetchUsers(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var userInfo,config,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:FETCH_USERS_REQUEST,loading:true});userInfo=getState().userLogin.userInfo;config={headers:{\"Content-Type\":\"application/json\",authorization:\"\".concat(userInfo.token)}};_context2.next=6;return axios.get(\"/all-students\",config);case 6:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;dispatch({type:FETCH_USERS_SUCCESS,payload:data});_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);dispatch({type:FETCH_USERS_FAIL,error:_context2.t0.response&&_context2.t0.response.data.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();};export var fetchUserprofile=function fetchUserprofile(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var userInfo,config,_yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:FETCH_USERPROFILE_REQUEST,loading:true});userInfo=getState().userLogin.userInfo;config={headers:{\"Content-Type\":\"application/json\",authorization:\"\".concat(userInfo.token)}};_context3.next=6;return axios.get(\"/user-profile\",config);case 6:_yield$axios$get2=_context3.sent;data=_yield$axios$get2.data;dispatch({type:FETCH_USERPROFILE_SUCCESS,payload:data});_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);dispatch({type:FETCH_USERPROFILE_FAIL,error:_context3.t0.response&&_context3.t0.response.data.message});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function(_x4,_x5){return _ref4.apply(this,arguments);};}();};export var logoutUser=function logoutUser(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:sessionStorage.clear();try{dispatch({type:USER_LOGOUT});}catch(error){}case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/asplap1462/Downloads/project-31/Frontend/src/redux/actions/users/useractions.js"],"names":["axios","USER_LOGIN_REQUEST","USER_LOGIN_FAIL","USER_LOGIN_SUCCESS","USER_LOGOUT","FETCH_USERS_REQUEST","FETCH_USERS_SUCCESS","FETCH_USERS_FAIL","FETCH_USERPROFILE_REQUEST","FETCH_USERPROFILE_SUCCESS","FETCH_USERPROFILE_FAIL","loginUser","username","password","dispatch","type","config","credentials","headers","post","data","payload","sessionStorage","setItem","JSON","stringify","profile","id","token","is_staff","response","message","fetchUsers","getState","loading","userInfo","userLogin","authorization","get","error","fetchUserprofile","logoutUser","clear"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {\n\n    USER_LOGIN_REQUEST,\n    USER_LOGIN_FAIL,\n    USER_LOGIN_SUCCESS,\n    USER_LOGOUT,\n    FETCH_USERS_REQUEST,\n    FETCH_USERS_SUCCESS,\n    FETCH_USERS_FAIL,\n    FETCH_USERPROFILE_REQUEST,\n    FETCH_USERPROFILE_SUCCESS,\n    FETCH_USERPROFILE_FAIL,\n} from \"./actionTypes\";\n\n\nexport const loginUser = ({ username, password }) => {\n    return async (dispatch) => {\n        try {\n            dispatch({\n                type: USER_LOGIN_REQUEST,\n            });\n\n            const config = {\n                credentials: \"include\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            };\n            const { data } = await axios.post(\n                \"/api-login\",\n                { username, password },\n                config\n            );\n            dispatch({\n                type: USER_LOGIN_SUCCESS,\n                payload: data,\n            });\n            sessionStorage.setItem(\"userAuthData\", JSON.stringify(data));\n            sessionStorage.setItem(\"id\", JSON.stringify(data.profile.id));\n            sessionStorage.setItem(\"token\", JSON.stringify(data.token));\n            sessionStorage.setItem(\"isstaff\", JSON.stringify(data.profile.is_staff));\n            sessionStorage.setItem(\"username\", JSON.stringify(data.profile.username));\n\n\n        } catch (error) {\n            dispatch({\n                type: USER_LOGIN_FAIL,\n                payload: error.response.data.message,\n            });\n        }\n    };\n};\n\nexport const fetchUsers = () => {\n    return async (dispatch, getState) => {\n        try {\n            dispatch({\n                type: FETCH_USERS_REQUEST,\n                loading: true,\n            });\n            const { userInfo } = getState().userLogin;\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    authorization: `${userInfo.token}`,\n                },\n            };\n            const { data } = await axios.get(\"/all-students\", config);\n            dispatch({\n                type: FETCH_USERS_SUCCESS,\n                payload: data,\n            });\n        } catch (error) {\n            dispatch({\n                type: FETCH_USERS_FAIL,\n                error: error.response && error.response.data.message,\n            });\n        }\n    };\n};\n\nexport const fetchUserprofile = () => {\n    return async (dispatch, getState) => {\n        try {\n            dispatch({\n                type: FETCH_USERPROFILE_REQUEST,\n                loading: true,\n            });\n            const { userInfo } = getState().userLogin;\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    authorization: `${userInfo.token}`,\n                },\n            };\n\n            const { data } = await axios.get(\"/user-profile\", config);\n            dispatch({\n                type: FETCH_USERPROFILE_SUCCESS,\n                payload: data,\n            });\n        } catch (error) {\n            dispatch({\n                type: FETCH_USERPROFILE_FAIL,\n                error: error.response && error.response.data.message,\n            });\n        }\n    };\n}\n\nexport const logoutUser = () => {\n    return async (dispatch) => {\n        sessionStorage.clear();\n        try {\n            dispatch({\n                type: USER_LOGOUT,\n            });\n        } catch (error) { }\n    };\n};\n"]},"metadata":{},"sourceType":"module"}