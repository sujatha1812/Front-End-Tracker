{"ast":null,"code":"import axios from \"axios\";\nimport { USER_LOGIN_REQUEST, USER_LOGIN_FAIL, USER_LOGIN_SUCCESS, USER_LOGOUT, FETCH_USERS_REQUEST, FETCH_USERS_SUCCESS, FETCH_USERS_FAIL, FETCH_USERPROFILE_REQUEST, FETCH_USERPROFILE_SUCCESS, FETCH_USERPROFILE_FAIL } from \"./actionTypes\";\nexport const loginUser = _ref => {\n  let {\n    username,\n    password\n  } = _ref;\n  return async dispatch => {\n    try {\n      dispatch({\n        type: USER_LOGIN_REQUEST\n      });\n      const config = {\n        credentials: \"include\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      const {\n        data\n      } = await axios.post(\"/api-login\", {\n        username,\n        password\n      }, config);\n      dispatch({\n        type: USER_LOGIN_SUCCESS,\n        payload: data\n      });\n      console.log(data.token);\n      sessionStorage.setItem(\"userAuthData\", JSON.stringify(data.profile));\n      sessionStorage.setItem(\"token\", JSON.stringify(data.token));\n    } catch (error) {\n      dispatch({\n        type: USER_LOGIN_FAIL,\n        payload: error.response.data.message\n      });\n    }\n  };\n};\nexport const fetchUsers = () => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: FETCH_USERS_REQUEST,\n        loading: true\n      });\n      const {\n        userInfo\n      } = getState().userLogin;\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `token${userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.get(\"/all-students\", config);\n      dispatch({\n        type: FETCH_USERS_SUCCESS,\n        payload: data\n      });\n    } catch (error) {\n      dispatch({\n        type: FETCH_USERS_FAIL,\n        error: error.response && error.response.data.message\n      });\n    }\n  };\n};\nexport const fetchUserprofile = () => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: FETCH_USERPROFILE_REQUEST,\n        loading: true\n      });\n      const {\n        userInfo\n      } = getState().userLogin;\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `token ${userInfo.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.get(\"/user-profile\", config);\n      dispatch({\n        type: FETCH_USERPROFILE_SUCCESS,\n        payload: data\n      });\n      sessionStorage.setItem(\"isstaff\", JSON.stringify(data.is_staff));\n    } catch (error) {\n      dispatch({\n        type: FETCH_USERPROFILE_FAIL,\n        error: error.response && error.response.data.message\n      });\n    }\n  };\n};\nexport const logoutUser = () => {\n  return async dispatch => {\n    sessionStorage.clear();\n\n    try {\n      dispatch({\n        type: USER_LOGOUT\n      });\n    } catch (error) {}\n  };\n};","map":{"version":3,"sources":["/home/asplap1462/Desktop/Documents/Tasks/task1/project-31/Frontend/src/redux/actions/users/useractions.js"],"names":["axios","USER_LOGIN_REQUEST","USER_LOGIN_FAIL","USER_LOGIN_SUCCESS","USER_LOGOUT","FETCH_USERS_REQUEST","FETCH_USERS_SUCCESS","FETCH_USERS_FAIL","FETCH_USERPROFILE_REQUEST","FETCH_USERPROFILE_SUCCESS","FETCH_USERPROFILE_FAIL","loginUser","username","password","dispatch","type","config","credentials","headers","data","post","payload","console","log","token","sessionStorage","setItem","JSON","stringify","profile","error","response","message","fetchUsers","getState","loading","userInfo","userLogin","authorization","get","fetchUserprofile","is_staff","logoutUser","clear"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {\n\n    USER_LOGIN_REQUEST,\n    USER_LOGIN_FAIL,\n    USER_LOGIN_SUCCESS,\n    USER_LOGOUT,\n    FETCH_USERS_REQUEST,\n    FETCH_USERS_SUCCESS,\n    FETCH_USERS_FAIL,\n    FETCH_USERPROFILE_REQUEST,\n    FETCH_USERPROFILE_SUCCESS,\n    FETCH_USERPROFILE_FAIL,\n} from \"./actionTypes\";\n\n\nexport const loginUser = ({ username, password }) => {\n    return async (dispatch) => {\n        try {\n            dispatch({\n                type: USER_LOGIN_REQUEST,\n            });\n\n            const config = {\n                credentials: \"include\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            };\n            const { data } = await axios.post(\n                \"/api-login\",\n                { username, password },\n                config\n            );\n            dispatch({\n                type: USER_LOGIN_SUCCESS,\n                payload: data,\n            });\n            console.log(data.token)\n            sessionStorage.setItem(\"userAuthData\", JSON.stringify(data.profile));\n            sessionStorage.setItem(\"token\", JSON.stringify(data.token));\n        } catch (error) {\n            dispatch({\n                type: USER_LOGIN_FAIL,\n                payload: error.response.data.message,\n            });\n        }\n    };\n};\n\nexport const fetchUsers = () => {\n    return async (dispatch, getState) => {\n        try {\n            dispatch({\n                type: FETCH_USERS_REQUEST,\n                loading: true,\n            });\n            const { userInfo } = getState().userLogin;\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    authorization: `token${userInfo.token}`,\n                },\n            };\n            const { data } = await axios.get(\"/all-students\", config);\n            dispatch({\n                type: FETCH_USERS_SUCCESS,\n                payload: data,\n            });\n        } catch (error) {\n            dispatch({\n                type: FETCH_USERS_FAIL,\n                error: error.response && error.response.data.message,\n            });\n        }\n    };\n};\n\nexport const fetchUserprofile = () => {\n    return async (dispatch, getState) => {\n        try {\n            dispatch({\n                type: FETCH_USERPROFILE_REQUEST,\n                loading: true,\n            });\n            const { userInfo } = getState().userLogin;\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    authorization: `token ${userInfo.token}`,\n                },\n            };\n\n            const { data } = await axios.get(\"/user-profile\", config);\n            dispatch({\n                type: FETCH_USERPROFILE_SUCCESS,\n                payload: data,\n            });\n            sessionStorage.setItem(\"isstaff\", JSON.stringify(data.is_staff));\n        } catch (error) {\n            dispatch({\n                type: FETCH_USERPROFILE_FAIL,\n                error: error.response && error.response.data.message,\n            });\n        }\n    };\n}\n\nexport const logoutUser = () => {\n    return async (dispatch) => {\n        sessionStorage.clear();\n        try {\n            dispatch({\n                type: USER_LOGOUT,\n            });\n        } catch (error) { }\n    };\n};\n"]},"metadata":{},"sourceType":"module"}